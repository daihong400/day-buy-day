$(function(){
    var dataMap=[
        {
            "id":"ba410aec-166c-469c-8164-52d07ff5852b",
            "name":"\u98CE\u9669\u7BA1\u7406",
            "desc":"\u5408\u89C4\u98CE\u9669\u81EA\u8BC4",
            "forNavigation":true,
            "companyId":"deloitte",
            "url":null,
            "icon":" url(>skin>common\/icons.gif) -220px -60px",
            "parentId":null,
            "order":null,
            "systemId":null,
            "use":false,
            "target":null,
            "hasChild":false,
            "children":[
                {
                    "id":"3b1f8173-99fa-4d28-a92b-3348bac39c9a",
                    "name":"\u5DE5\u4F5C\u6A21\u677F\u7BA1\u7406",
                    "desc":"${res[\"risk.language\/menue_work_template_management\"]}",
                    "forNavigation":true,
                    "companyId":"deloitte",
                    "url":null,
                    "icon":" url(>skin>common\/icons.gif) -280px -60px",
                    "parentId":"ba410aec-166c-469c-8164-52d07ff5852b",
                    "order":null,
                    "systemId":null,
                    "use":false,
                    "target":null,
                    "hasChild":false,
                    "children":[
                        {
                            "id":"d330d87a-f187-4115-bb48-6323cde0a4b6",
                            "name":"\u5DE5\u4F5C\u6A21\u677F-\u521B\u5EFA",
                            "desc":"${res[\"risk.language\/menue_work_template_add\"]}",
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"com.deloitte.risk.rr.view.RRTemplateManager.ling",
                            "icon":" url(>skin>common\/icons.gif) -260px -140px",
                            "parentId":"3b1f8173-99fa-4d28-a92b-3348bac39c9a",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"e0cdb94c-9e15-48e8-8af1-5cbd3e8e93c7",
                            "name":"\u5DE5\u4F5C\u6A21\u677F-\u4FEE\u8BA2",
                            "desc":"${res[\"risk.language\/menue_work_template_modify\"]}",
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"com.deloitte.risk.rr.view.RRTemplateModify.ling",
                            "icon":" url(>skin>common\/icons.gif) -260px -140px",
                            "parentId":"3b1f8173-99fa-4d28-a92b-3348bac39c9a",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        }
                    ]
                },
                {
                    "id":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                    "name":"\u98CE\u9669\u8BC4\u4F30",
                    "desc":"\u98CE\u9669\u8BC4\u4F30",
                    "forNavigation":true,
                    "companyId":"deloitte",
                    "url":null,
                    "icon":" url(>skin>common\/icons.gif) -220px -140px",
                    "parentId":"ba410aec-166c-469c-8164-52d07ff5852b",
                    "order":null,
                    "systemId":null,
                    "use":false,
                    "target":null,
                    "hasChild":false,
                    "children":[
                        {
                            "id":"625dfe15-3ba3-4fff-aaa8-99ea8654767e",
                            "name":"\u5DE5\u4F5C\u8BA1\u5212-\u521B\u5EFA",
                            "desc":"\u98CE\u9669\u8BC4\u4F30\u8BA1\u5212\u7BA1\u7406",
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.plan.view.PlanMainInfoManager_CITIC.ling",
                            "icon":" url(>skin>common\/icons.gif) -0px -120px",
                            "parentId":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"f20a497e-4825-4c40-a572-383231d5878e",
                            "name":"\u5DE5\u4F5C\u8BA1\u5212-\u5BA1\u6279",
                            "desc":null,
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.plan.view.PlanMainInfoApprove_CITIC.ling",
                            "icon":" url(>skin>common\/icons.gif) -20px -0px",
                            "parentId":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"13b597b9-59be-48c2-821e-2eca973d2db9",
                            "name":"\u5DE5\u4F5C\u8BA1\u5212-\u76D1\u63A7",
                            "desc":null,
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.rcsa.view.RCSAPlanMainInfoMonitor_CITIC.ling",
                            "icon":" url(>skin>common\/icons.gif) -260px -60px",
                            "parentId":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"3c46ddd4-d7b9-4db9-ac28-34d9b7bf5451",
                            "name":"\u98CE\u9669\u8BC4\u4F30-\u6267\u884C",
                            "desc":"\u5408\u89C4\u98CE\u9669\u81EA\u8BC4\u6267\u884C",
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.rcsa.view.ExecuteSelfAssessmentRiskControl_CITIC.ling",
                            "icon":" url(>skin>common\/icons.gif) -300px -60px",
                            "parentId":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"3581ddf1-88ce-41c0-9786-f88dc7060411",
                            "name":"\u98CE\u9669\u8BC4\u4F30-\u5BA1\u6279",
                            "desc":"\u5408\u89C4\u98CE\u9669\u81EA\u8BC4-\u5BA1\u6279",
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.rcsa.view.ApproveSelfAssessmentRiskControl_CITIC.ling",
                            "icon":" url(>skin>common\/icons.gif) -300px -60px",
                            "parentId":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"a0d29bae-5c63-4f51-be81-ad080de0fe1c",
                            "name":"\u98CE\u9669\u8BC4\u4F30-\u8DDF\u8FDB",
                            "desc":null,
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.rcsa.view.CheckSelfAssessmentRiskControl_CITIC.ling",
                            "icon":" url(>skin>common\/icons.gif) -60px -20px",
                            "parentId":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"43014e89-58d7-4135-96fd-8a8bf29a590b",
                            "name":"\u98CE\u9669\u8BC4\u4F30-\u67E5\u770B",
                            "desc":null,
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.rcsa.view.ViewSelfAssessmentRiskControl_CITIC.ling",
                            "icon":" url(>skin>common\/icons.gif) -20px -40px",
                            "parentId":"35baa1dd-c851-4a89-a174-8cf4fa649baa",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        }
                    ]
                },
                {
                    "id":"751b5217-60f8-4f91-b734-62a1522123ec",
                    "name":"\u91D1\u878D_\u4EA4\u6613\u5BF9\u624B\u62A5\u544A  ",
                    "desc":null,
                    "forNavigation":true,
                    "companyId":"deloitte",
                    "url":null,
                    "icon":"  url(>skin>common\/icons.gif) -60px -160px",
                    "parentId":"ba410aec-166c-469c-8164-52d07ff5852b",
                    "order":null,
                    "systemId":null,
                    "use":false,
                    "target":null,
                    "hasChild":false,
                    "children":[
                    ]
                }
            ]
        },
        {
            "id":"9f40826c-4c65-44ad-9e97-71a1613bf65b",
            "name":"\u5408\u89C4\u7BA1\u7406",
            "desc":null,
            "forNavigation":true,
            "companyId":"deloitte",
            "url":null,
            "icon":"url(>skin>common\/icons.gif) -60px -160px",
            "parentId":null,
            "order":null,
            "systemId":null,
            "use":false,
            "target":null,
            "hasChild":false,
            "children":[
                {
                    "id":"7d9ec3ff-2358-4a00-bf8f-d473d3698e6c",
                    "name":"\u5408\u89C4\u95EE\u7B54",
                    "desc":"\u5408\u89C4\u95EE\u7B54",
                    "forNavigation":true,
                    "companyId":"deloitte",
                    "url":null,
                    "icon":" url(>skin>common\/icons.gif) -180px -0px",
                    "parentId":"9f40826c-4c65-44ad-9e97-71a1613bf65b",
                    "order":null,
                    "systemId":null,
                    "use":false,
                    "target":null,
                    "hasChild":false,
                    "children":[
                        {
                            "id":"e7ec8931-d49d-4225-ad92-3a293f449adf",
                            "name":"\u5408\u89C4\u63D0\u95EE",
                            "desc":"",
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.interlocution.view.InterlocutionManager.ling",
                            "icon":" url(>skin>common\/icons.gif) -120px -60px",
                            "parentId":"7d9ec3ff-2358-4a00-bf8f-d473d3698e6c",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"2e3c6969-04e7-432b-8787-bb37ebb65f9f",
                            "name":"\u5408\u89C4\u56DE\u7B54",
                            "desc":null,
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"com.deloitte.risk.interlocution.view.InterlocutionManagerAnswer.ling",
                            "icon":" url(>skin>common\/icons.gif) -280px -60px",
                            "parentId":"7d9ec3ff-2358-4a00-bf8f-d473d3698e6c",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        },
                        {
                            "id":"f811574d-7984-426c-90b1-79350cea6274",
                            "name":"\u5408\u89C4\u6307\u6D3E",
                            "desc":"\u5408\u89C4\u6307\u6D3E",
                            "forNavigation":true,
                            "companyId":"deloitte",
                            "url":"risk.interlocution.view.InterlocutionManagerAssign.ling",
                            "icon":" url(>skin>common\/icons.gif) -120px -120px",
                            "parentId":"7d9ec3ff-2358-4a00-bf8f-d473d3698e6c",
                            "order":null,
                            "systemId":null,
                            "use":false,
                            "target":null,
                            "hasChild":false,
                            "children":[
                            ]
                        }
                    ]
                }
            ]
        },{
            "id":"a172a165-0d0d-4ae5-a489-dd3229101a0d",
            "name":"\u6CD5\u5F8B\u6848\u4EF6\u7BA1\u7406",
            "desc":"\u6848\u4EF6\u7BA1\u7406",
            "forNavigation":true,
            "companyId":"deloitte",
            "url":null,
            "icon":"url(>skin>common\/icons.gif) -60px -160px",
            "parentId":null,
            "order":null,
            "systemId":null,
            "use":false,
            "target":null,
            "hasChild":false,
            "children":[
            ]
        },
    ]

    // 左侧菜单加载
    function deepEach(data, elem) {
        $.each(data, function(index, value){
            if(value.children.length === 0) {
                var html = '<li><a href="javascript:;" data-href="'+ value.url +'" class="afinve"><span class="">'+ value.name +'</span></a></li>';
                elem.append(html);
            } else {
                var html = '<li><a href="javascript:;" class="afinve"> <span class="arrow"></span><span class="">'+ value.name +'</span></a>';
                var newIndex = value.id;
                elem.append(html+ '<ul class="sub-menu" id='+ newIndex +'>');
                deepEach(value.children, $("#"+ newIndex));
                elem.append("</ul></li>");
            }
        });
    }

    $("#navMenu").html("");
    deepEach(dataMap, $("#navMenu"));

    // nav收缩展开
    $('.navMenu li a').on('click', function () {
        var parent = $(this).parent().parent();//获取当前页签的父级的父级
        var labeul = $(this).parent("li").find(">ul")
        if ($(this).parent().hasClass('open') == false) {
            //展开未展开
            parent.find('ul').slideUp(300);
            parent.find("li").removeClass("open")
            parent.find('li a').removeClass("active").find(".arrow").removeClass("open")
            $(this).parent("li").addClass("open").find(labeul).slideDown(300);
            $(this).addClass("active").find(".arrow").addClass("open")
        } else {
            $(this).parent("li").removeClass("open").find(labeul).slideUp(300);
            if ($(this).parent().find("ul").length > 0) {
                $(this).removeClass("active").find(".arrow").removeClass("open")
            } else {
                $(this).addClass("active")
            }
        }

    });

    $('.navMenu li a').click(function(){
        if($(this).attr('data-href') !== 'null' && $(this).attr('data-href') !== undefined) {
            alert($(this).attr('data-href'))
        }
    })

    //初始化热力图
    heatMapInit();
    function heatMapInit() {
        var myChart = echarts.init(document.getElementById('heatMap'));
        myChart.title = '笛卡尔坐标系上的热力图';

        var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a',
            '7a', '8a', '9a','10a','11a',
            '12p', '1p', '2p', '3p', '4p', '5p',
            '6p', '7p', '8p', '9p', '10p', '11p'];
        var days = ['Saturday', 'Friday', 'Thursday',
            'Wednesday', 'Tuesday', 'Monday', 'Sunday'];

        var data = [[0,0,5],[0,1,1],[0,2,0],[0,3,0],[0,4,0],[0,5,0],[0,6,0],[0,7,0],[0,8,0],[0,9,0],[0,10,0],[0,11,2],[0,12,4],[0,13,1],[0,14,1],[0,15,3],[0,16,4],[0,17,6],[0,18,4],[0,19,4],[0,20,3],[0,21,3],[0,22,2],[0,23,5],[1,0,7],[1,1,0],[1,2,0],[1,3,0],[1,4,0],[1,5,0],[1,6,0],[1,7,0],[1,8,0],[1,9,0],[1,10,5],[1,11,2],[1,12,2],[1,13,6],[1,14,9],[1,15,11],[1,16,6],[1,17,7],[1,18,8],[1,19,12],[1,20,5],[1,21,5],[1,22,7],[1,23,2],[2,0,1],[2,1,1],[2,2,0],[2,3,0],[2,4,0],[2,5,0],[2,6,0],[2,7,0],[2,8,0],[2,9,0],[2,10,3],[2,11,2],[2,12,1],[2,13,9],[2,14,8],[2,15,10],[2,16,6],[2,17,5],[2,18,5],[2,19,5],[2,20,7],[2,21,4],[2,22,2],[2,23,4],[3,0,7],[3,1,3],[3,2,0],[3,3,0],[3,4,0],[3,5,0],[3,6,0],[3,7,0],[3,8,1],[3,9,0],[3,10,5],[3,11,4],[3,12,7],[3,13,14],[3,14,13],[3,15,12],[3,16,9],[3,17,5],[3,18,5],[3,19,10],[3,20,6],[3,21,4],[3,22,4],[3,23,1],[4,0,1],[4,1,3],[4,2,0],[4,3,0],[4,4,0],[4,5,1],[4,6,0],[4,7,0],[4,8,0],[4,9,2],[4,10,4],[4,11,4],[4,12,2],[4,13,4],[4,14,4],[4,15,14],[4,16,12],[4,17,1],[4,18,8],[4,19,5],[4,20,3],[4,21,7],[4,22,3],[4,23,0],[5,0,2],[5,1,1],[5,2,0],[5,3,3],[5,4,0],[5,5,0],[5,6,0],[5,7,0],[5,8,2],[5,9,0],[5,10,4],[5,11,1],[5,12,5],[5,13,10],[5,14,5],[5,15,7],[5,16,11],[5,17,6],[5,18,0],[5,19,5],[5,20,3],[5,21,4],[5,22,2],[5,23,0],[6,0,1],[6,1,0],[6,2,0],[6,3,0],[6,4,0],[6,5,0],[6,6,0],[6,7,0],[6,8,0],[6,9,0],[6,10,1],[6,11,0],[6,12,2],[6,13,1],[6,14,3],[6,15,4],[6,16,0],[6,17,0],[6,18,0],[6,19,0],[6,20,1],[6,21,2],[6,22,2],[6,23,6]];

        data = data.map(function (item) {
            return [item[1], item[0], item[2] || '-'];
        });

        option = {
            tooltip: {
                position: 'top'
            },
            animation: false,
            grid: {
                height: '50%',
                y: '10%'
            },
            xAxis: {
                type: 'category',
                data: hours,
                splitArea: {
                    show: true
                }
            },
            yAxis: {
                type: 'category',
                data: days,
                splitArea: {
                    show: true
                }
            },
            visualMap: {
                min: 0,
                max: 10,
                calculable: true,
                orient: 'horizontal',
                left: 'center',
                bottom: '15%'
            },
            series: [{
                name: 'Punch Card',
                type: 'heatmap',
                data: data,
                label: {
                    normal: {
                        show: true
                    }
                },
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }]
        };
        myChart.setOption(option);
    }

}());